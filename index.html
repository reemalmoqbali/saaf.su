<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ± Ø¹Ù† Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --main:#1b5e20;
  --accent:#388e3c;
  --light:#fffbe6;
  --dark:#0b0b0b;
}

*{box-sizing:border-box;transition:all .3s ease;}
body{margin:0;font-family:'Tajawal',sans-serif;background:var(--dark);color:white;overflow-x:hidden;}

/* ğŸŒ´ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.home{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  background:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQAqqkE-xpn2wWigL86lhw9nelrrL4HDp88mpx8kYGoL8H1-bqcwgS4RUjckfmmt6W79J72P3IGSLh8yDiOW9nEhra4H98J1AXXVogAZTyrnQ&s=10.jpg') center/cover no-repeat;
  position:fixed;
  inset:0;
  z-index:1;
  transition:opacity .6s ease;
}
.home.hidden{opacity:0;pointer-events:none;}
.home::before{
  content:"";
  position:absolute;inset:0;
  background:rgba(0,0,0,0.8);
}
.home-content{
  position:relative;
  text-align:center;
  z-index:2;
}
.home-content h1{
  font-size:2.8em;
  margin-bottom:25px;
  color:#fff;
  text-shadow:0 4px 10px rgba(0,0,0,0.7);
}
.nav-bar{
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(10px);
  border-radius:40px;
  padding:12px 25px;
  display:flex;
  gap:20px;
  justify-content:center;
}
.nav-bar button{
  border:none;
  border-radius:25px;
  padding:12px 24px;
  font-size:1.1em;
  cursor:pointer;
  background:var(--main);
  color:white;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
}
.nav-bar button:hover{background:var(--accent);transform:scale(1.05);}

/* ğŸ§© Ø§Ù„ØµÙØ­Ø§Øª */
.page{
  position:absolute;top:0;left:0;
  width:100%;height:100vh;
  background:var(--light);
  color:#333;
  display:none;opacity:0;
  z-index:5;
}
.page.active{display:block;opacity:1;animation:fadeZoom .6s ease;}
@keyframes fadeZoom{from{opacity:0;transform:scale(0.96);}to{opacity:1;transform:scale(1);}}

/* ğŸ“‹ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ */
.center{display:flex;justify-content:center;align-items:center;height:100vh;}
.form-card{
  background:#fff;
  border-radius:12px;
  box-shadow:0 6px 25px rgba(0,0,0,0.15);
  padding:30px;
  width:340px;
  text-align:center;
}
.form-card h2{color:var(--main);}
.form-card input{
  width:100%;
  padding:10px;
  margin:10px 0;
  border:1px solid #ccc;
  border-radius:8px;
}
.form-card button{
  width:100%;
  background:var(--main);
  color:#fff;
  border:none;
  border-radius:8px;
  padding:10px;
  cursor:pointer;
}
.form-card button:hover{background:var(--accent);}
.form-card a{color:var(--accent);text-decoration:none;}
.form-card a:hover{text-decoration:underline;}

/* ğŸ”™ Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ */
.back-btn{
  position:fixed;
  bottom:20px;
  left:20px;
  background:var(--main);
  color:white;
  border:none;
  padding:12px 18px;
  border-radius:50px;
  font-size:1em;
  font-weight:bold;
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  cursor:pointer;
  z-index:999;
}
.back-btn:hover{background:var(--accent);transform:translateY(-2px);}

/* ğŸ“Š Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ */
.dashboard{min-height:100vh;background:#f7f4e8;padding:20px;}
.topbar{
  display:flex;justify-content:space-between;align-items:center;
  background:white;padding:12px 20px;border-radius:10px;
  box-shadow:0 3px 10px rgba(0,0,0,0.1);
}
.tabs{display:flex;gap:10px;margin-top:20px;flex-wrap:wrap;}
.tab{
  background:white;padding:8px 16px;border-radius:20px;
  cursor:pointer;color:var(--main);font-weight:bold;
  box-shadow:0 3px 8px rgba(0,0,0,0.1);
}
.tab.active{background:var(--main);color:white;}
.tab:hover{background:var(--accent);color:white;}
.chart-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:20px;
  margin-top:20px;
}
.chart-box{
  background:white;
  border-radius:10px;
  padding:15px;
  box-shadow:0 5px 15px rgba(0,0,0,0.1);
}
th{background:var(--main);color:white;}
th,td{padding:8px;text-align:center;border-bottom:1px solid #ddd;}

/* âš ï¸ Ø§Ù„ØªØ­Ø°ÙŠØ± */
.alert-modal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.7);display:none;
  justify-content:center;align-items:center;z-index:1000;
}
.alert-box{
  background:#fff;padding:25px;border-radius:10px;
  max-width:500px;color:#333;text-align:center;
}
.alert-box h3{color:#c0392b;}
.alert-box button{
  margin-top:15px;background:var(--main);color:white;
  border:none;padding:10px 18px;border-radius:8px;cursor:pointer;
}
</style>
</head>

<body>

<!-- ğŸŒ´ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<section class="home" id="home">
  <div class="home-content">
    <h1>Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ± Ø¹Ù† Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ ğŸŒ´</h1>
    <div class="nav-bar">
      <button onclick="showPage('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <button onclick="showPage('signup')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    </div>
  </div>
</section>

<!-- ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<section class="page" id="login">
  <div class="center">
    <div class="form-card">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <input type="text" id="loginUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
      <input type="password" id="loginPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
      <p><a href="#" onclick="showPage('forgot')">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</a></p>
      <p style="font-size:0.9em;color:#666;">ØªØ¬Ø±ÙŠØ¨ÙŠ: admin / 12345</p>
    </div>
  </div>
  <button class="back-btn" onclick="goBack()">â¬… Ø±Ø¬ÙˆØ¹</button>
</section>

<!-- ğŸ§¾ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ -->
<section class="page" id="signup">
  <div class="center">
    <div class="form-card">
      <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
      <input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
      <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
      <button onclick="showPage('login')">ØªØ³Ø¬ÙŠÙ„</button>
    </div>
  </div>
  <button class="back-btn" onclick="goBack()">â¬… Ø±Ø¬ÙˆØ¹</button>
</section>

<!-- ğŸ”‘ Ù†Ø³ÙŠØ§Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± -->
<section class="page" id="forgot">
  <div class="center">
    <div class="form-card">
      <h2>Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h2>
      <input type="email" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
      <button onclick="showPage('login')">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†</button>
    </div>
  </div>
  <button class="back-btn" onclick="goBack()">â¬… Ø±Ø¬ÙˆØ¹</button>
</section>

<!-- ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ -->
<section class="page" id="dashboard">
  <div class="dashboard">
    <div class="topbar">
      <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</h2>
      <button onclick="logout()" style="background:#a33;color:white;border:none;border-radius:8px;padding:8px 16px;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="tabs">
      <div class="tab active" onclick="switchTab('history')">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©</div>
      <div class="tab" onclick="switchTab('analysis')">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ</div>
      <div class="tab" onclick="switchTab('prediction')">Ø§Ù„ØªÙ†Ø¨Ø¤ ÙˆØ§Ù„Ø¥Ù†Ø°Ø§Ø±</div>
    </div>

    <!-- ğŸ”¹ Ø§Ù„ØªØ§Ø±ÙŠØ® -->
    <div id="tab-history" class="chart-grid">
      <div class="chart-box"><canvas id="chart1"></canvas></div>
      <div class="chart-box"><canvas id="chart2"></canvas></div>
    </div>

    <!-- ğŸ”¹ Ø§Ù„ØªØ­Ù„ÙŠÙ„ -->
    <div id="tab-analysis" class="chart-grid" style="display:none;">
      <div class="chart-box"><canvas id="chart3"></canvas></div>
      <div class="chart-box"><canvas id="chart4"></canvas></div>
    </div>

    <!-- ğŸ”¹ Ø§Ù„ØªÙ†Ø¨Ø¤ -->
    <div id="tab-prediction" class="chart-grid" style="display:none;">
      <div class="chart-box"><canvas id="chart5"></canvas></div>
      <div class="chart-box"><canvas id="chart6"></canvas></div>
    </div>
  </div>
  <button class="back-btn" onclick="goBack()">â¬… Ø±Ø¬ÙˆØ¹</button>
</section>

<!-- âš ï¸ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ­Ø°ÙŠØ± -->
<div class="alert-modal" id="alertModal">
  <div class="alert-box">
    <h3>âš ï¸ ØªØ­Ø°ÙŠØ±: Ù†Ø´Ø§Ø· Ù…Ø±ØªÙØ¹ Ù„Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡!</h3>
    <p>ØªØ´ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© ÙƒØ¨ÙŠØ±Ø© ÙÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³ Ø®Ù„Ø§Ù„ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø®ÙŠØ±Ø©.</p>
    <ul style="text-align:right;list-style:circle;">
      <li>Ù‚Ù… Ø¨ÙØ­Øµ Ø¬Ø°ÙˆØ¹ Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§.</li>
      <li>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØµØ§Ø¦Ø¯ Ø§Ù„ÙØ±Ù…ÙˆÙ†ÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…ØªÙ‚Ø§Ø±Ø¨.</li>
      <li>Ø­Ù‚Ù† Ø§Ù„Ø£Ø´Ø¬Ø§Ø± Ø§Ù„Ù…ØµØ§Ø¨Ø© Ø¨Ù…Ø¨ÙŠØ¯Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§.</li>
      <li>ØªÙ‚Ù„ÙŠÙ… Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù…ØªØ¶Ø±Ø±Ø© ÙˆØ­Ø±Ù‚Ù‡Ø§ Ø¨Ø¹ÙŠØ¯Ù‹Ø§.</li>
    </ul>
    <button onclick="closeAlert()">ÙÙ‡Ù…Øª</button>
  </div>
</div>

<script>
const data=[
  {date:"2025-11-01",insects:22,temp:34,hum:60,co2:430},
  {date:"2025-11-02",insects:28,temp:35,hum:63,co2:440},
  {date:"2025-11-03",insects:32,temp:36,hum:66,co2:450},
  {date:"2025-11-04",insects:38,temp:37,hum:68,co2:460},
  {date:"2025-11-05",insects:41,temp:38,hum:70,co2:470}
];
let charts=[];

/* ğŸ“‚ Ø§Ù„ØªÙ†Ù‚Ù„ */
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.getElementById('home').classList.add('hidden');
}
function goBack(){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('home').classList.remove('hidden');
}
function login(){
  const u=document.getElementById('loginUser').value.trim();
  const p=document.getElementById('loginPass').value.trim();
  if(u==="admin"&&p==="12345"){showPage('dashboard');renderCharts();}
  else alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©!");
}
function logout(){goBack();}
function closeAlert(){document.getElementById('alertModal').style.display='none';}
function switchTab(tab){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.chart-grid').forEach(x=>x.style.display='none');
  document.querySelector(`.tab:nth-child(${tab==='history'?1:tab==='analysis'?2:3})`).classList.add('active');
  document.getElementById(`tab-${tab}`).style.display='grid';
}

/* ğŸ“Š Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ© */
function renderCharts(){
  charts.forEach(c=>c.destroy());
  charts=[];
  
  // Ø§Ù„ØªØ§Ø±ÙŠØ®
  charts.push(new Chart(document.getElementById('chart1'),{
    type:'line',
    data:{labels:data.map(d=>d.date),
      datasets:[{label:'Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³',data:data.map(d=>d.insects),borderColor:'#c62828',tension:.3,fill:false},
                {label:'Ø§Ù„Ø­Ø±Ø§Ø±Ø©',data:data.map(d=>d.temp),borderColor:'#f9a825',tension:.3,fill:false}]},
    options:{plugins:{legend:{position:'bottom'}}}}));

  charts.push(new Chart(document.getElementById('chart2'),{
    type:'bar',
    data:{labels:data.map(d=>d.date),
      datasets:[{label:'Ø§Ù„Ø±Ø·ÙˆØ¨Ø©',data:data.map(d=>d.hum),backgroundColor:'#2e7d32'},
                {label:'COâ‚‚',data:data.map(d=>d.co2/10),backgroundColor:'#6a1b9a'}]},
    options:{plugins:{legend:{position:'bottom'}}}}));

  // Ø§Ù„ØªØ­Ù„ÙŠÙ„
  charts.push(new Chart(document.getElementById('chart3'),{
    type:'pie',
    data:{labels:['Ø­Ø±Ø§Ø±Ø©','Ø±Ø·ÙˆØ¨Ø©','COâ‚‚'],
          datasets:[{data:[36,65,45],backgroundColor:['#f9a825','#2e7d32','#6a1b9a']}]}}));

  charts.push(new Chart(document.getElementById('chart4'),{
    type:'radar',
    data:{labels:['Ø­Ø±Ø§Ø±Ø©','Ø±Ø·ÙˆØ¨Ø©','COâ‚‚','Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³'],
          datasets:[{label:'ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ¦ÙŠ',data:[36,65,45,35],backgroundColor:'rgba(27,94,32,0.4)',borderColor:'#1b5e20'}]}}));

  // Ø§Ù„ØªÙ†Ø¨Ø¤
  const last=data[data.length-1].insects;
  const predict=[], tempPredict=[];
  for(let i=1;i<=5;i++){
    predict.push(last+(Math.random()*6-2));
    tempPredict.push(35+(Math.random()*3));
  }

  charts.push(new Chart(document.getElementById('chart5'),{
    type:'line',
    data:{labels:['+1 ÙŠÙˆÙ…','+2 ÙŠÙˆÙ…','+3 ÙŠÙˆÙ…','+4 ÙŠÙˆÙ…','+5 ÙŠÙˆÙ…'],
          datasets:[{label:'ØªÙˆÙ‚Ø¹ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³',data:predict,borderColor:'#0277bd',tension:.3,fill:false}]},
    options:{plugins:{legend:{position:'bottom'}}}}));

  charts.push(new Chart(document.getElementById('chart6'),{
    type:'bar',
    data:{labels:['+1','+2','+3','+4','+5'],
          datasets:[{label:'ØªÙˆÙ‚Ø¹ Ø¯Ø±Ø¬Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±Ø©',data:tempPredict,backgroundColor:'#f9a825'}]},
    options:{plugins:{legend:{position:'bottom'}}}}));

  // ğŸ”¥ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø®Ø·Ø±
  const avgInsects=data.reduce((a,b)=>a+b.insects,0)/data.length;
  const avgTemp=data.reduce((a,b)=>a+b.temp,0)/data.length;
  const avgHum=data.reduce((a,b)=>a+b.hum,0)/data.length;
  if(avgInsects>30 && avgTemp>35 && avgHum>65){
    document.getElementById('alertModal').style.display='flex';
  }
}
</script>
</body>
</html>
