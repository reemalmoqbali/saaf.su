<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ± Ø¹Ù† Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root {
  --main:#4e6b2b;
  --accent:#a67c52;
  --light:#fffbe6;
  --dark:#1b1b1b;
}
*{box-sizing:border-box;transition:all .3s ease;}
body{margin:0;font-family:'Tajawal',sans-serif;background:var(--dark);color:white;overflow-x:hidden;}
/* Home */
.home{height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;background:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQAqqkE-xpn2wWigL86lhw9nelrrL4HDp88mpx8kYGoL8H1-bqcwgS4RUjckfmmt6W79J72P3IGSLh8yDiOW9nEhra4H98J1AXXVogAZTyrnQ&s=10.jpg')center/cover no-repeat;position:relative;}
.home::before{content:"";position:absolute;inset:0;background:rgba(0,0,0,0.6);}
.home-content{position:relative;text-align:center;}
.home-content h1{font-size:2.6em;margin-bottom:25px;color:#fff;}
.nav-bar{background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:40px;padding:10px 25px;display:flex;gap:20px;justify-content:center;}
.nav-bar button{border:none;border-radius:25px;padding:10px 20px;font-size:1em;cursor:pointer;background:var(--main);color:white;}
.nav-bar button:hover{background:var(--accent);}
/* Pages */
.page{position:absolute;top:0;left:0;width:100%;height:100vh;background:var(--light);color:#333;display:none;opacity:0;}
.page.active{display:block;opacity:1;animation:fadeIn .5s ease;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}

/* Forms */
.center{display:flex;justify-content:center;align-items:center;height:100vh;}
.form-card{background:#fff;border-radius:12px;box-shadow:0 6px 25px rgba(0,0,0,0.1);padding:30px;width:340px;text-align:center;}
.form-card h2{color:var(--main);}
.form-card input{width:100%;padding:10px;margin:10px 0;border:1px solid #ccc;border-radius:8px;}
.form-card button{width:100%;background:var(--main);color:#fff;border:none;border-radius:8px;padding:10px;cursor:pointer;}
.form-card button:hover{background:var(--accent);}
.form-card a{color:var(--accent);text-decoration:none;}
.form-card a:hover{text-decoration:underline;}

/* Dashboard */
.dashboard{min-height:100vh;background:#f7f4e8;padding:20px;}
.topbar{display:flex;justify-content:space-between;align-items:center;background:white;padding:12px 20px;border-radius:10px;box-shadow:0 3px 10px rgba(0,0,0,0.1);}
.tabs{display:flex;gap:10px;margin-top:20px;}
.tab{background:white;padding:8px 16px;border-radius:20px;cursor:pointer;color:var(--main);font-weight:bold;box-shadow:0 3px 8px rgba(0,0,0,0.1);}
.tab.active{background:var(--main);color:white;}
.tab:hover{background:var(--accent);color:white;}
.chart-area{background:white;border-radius:10px;padding:20px;margin-top:20px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
.table-box{background:white;border-radius:10px;margin-top:20px;padding:20px;box-shadow:0 5px 15px rgba(0,0,0,0.1);}
table{width:100%;border-collapse:collapse;}
th,td{padding:8px;border-bottom:1px solid #ddd;text-align:center;}
th{background:var(--main);color:white;}
.alert-modal{
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center;z-index:1000;
}
.alert-box{
  background:#fff;padding:25px;border-radius:10px;max-width:500px;color:#333;text-align:center;
  animation:fadeIn .5s ease;
}
.alert-box h3{color:#c0392b;}
.alert-box button{margin-top:15px;background:var(--main);color:white;border:none;padding:10px 18px;border-radius:8px;cursor:pointer;}
</style>
</head>

<body>
<!-- Home -->
<section class="home active" id="home">
  <div class="home-content">
    <h1>Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø¨ÙƒØ± Ø¹Ù† Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</h1>
    <div class="nav-bar">
      <button onclick="showPage('login')">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      <button onclick="showPage('signup')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    </div>
  </div>
</section>

<!-- Login -->
<section class="page" id="login">
  <div class="center">
    <div class="form-card">
      <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
      <input type="text" id="loginUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
      <input type="password" id="loginPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
      <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
      <p><a href="#" onclick="showPage('forgot')">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</a></p>
      <p>ØªØ¬Ø±ÙŠØ¨ÙŠ: admin / 12345</p>
    </div>
  </div>
</section>

<!-- Signup -->
<section class="page" id="signup">
  <div class="center">
    <div class="form-card">
      <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
      <input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
      <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
      <button onclick="showPage('login')">ØªØ³Ø¬ÙŠÙ„</button>
      <p><a href="#" onclick="showPage('login')">Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
    </div>
  </div>
</section>

<!-- Forgot Password -->
<section class="page" id="forgot">
  <div class="center">
    <div class="form-card">
      <h2>Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</h2>
      <input type="email" placeholder="Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" />
      <button onclick="showPage('login')">Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ¹ÙŠÙŠÙ†</button>
    </div>
  </div>
</section>

<!-- Dashboard -->
<section class="page" id="dashboard">
  <div class="dashboard">
    <div class="topbar">
      <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ Ù„Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡</h2>
      <button onclick="logout()" style="background:#a33;color:white;border:none;border-radius:8px;padding:8px 16px;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="tabs">
      <div class="tab active" onclick="switchTab('history')">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©</div>
      <div class="tab" onclick="switchTab('analysis')">Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ</div>
      <div class="tab" onclick="switchTab('prediction')">Ø§Ù„ØªÙ†Ø¨Ø¤ ÙˆØ§Ù„Ø¥Ù†Ø°Ø§Ø±</div>
    </div>

    <!-- Ø§Ù„ØªØ§Ø±ÙŠØ® -->
    <div id="tab-history" class="chart-area">
      <canvas id="chart1"></canvas>
    </div>

    <!-- Ø§Ù„ØªØ­Ù„ÙŠÙ„ -->
    <div id="tab-analysis" class="chart-area" style="display:none;">
      <canvas id="chart2"></canvas>
      <canvas id="chart3" style="margin-top:30px;"></canvas>
      <div class="table-box">
        <h3>ğŸ“‹ Ù‚Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3>
        <table>
          <tr><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³</th><th>Ø§Ù„Ø­Ø±Ø§Ø±Ø© Â°C</th><th>Ø§Ù„Ø±Ø·ÙˆØ¨Ø© %</th><th>COâ‚‚ ppm</th></tr>
          <tbody id="dataTable"></tbody>
        </table>
      </div>
    </div>

    <!-- Ø§Ù„ØªÙ†Ø¨Ø¤ -->
    <div id="tab-prediction" class="chart-area" style="display:none;">
      <h3>Ø§Ù„ØªÙ†Ø¨Ø¤ Ø¨Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ğŸ§ </h3>
      <p id="alertText"></p>
      <canvas id="chart4"></canvas>
    </div>
  </div>
</section>

<!-- ğŸ”´ Ù†Ø§ÙØ°Ø© ØªØ­Ø°ÙŠØ± -->
<div class="alert-modal" id="alertModal">
  <div class="alert-box">
    <h3>âš ï¸ ØªØ­Ø°ÙŠØ±: Ù†Ø´Ø§Ø· Ù…Ø±ØªÙØ¹ Ù„Ø³ÙˆØ³Ø© Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ø­Ù…Ø±Ø§Ø¡!</h3>
    <p>ØªØ´ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© ÙƒØ¨ÙŠØ±Ø© ÙÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³ Ø®Ù„Ø§Ù„ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø®ÙŠØ±Ø©.</p>
    <p><b>Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ù…ÙƒØ§ÙØ­Ø©:</b></p>
    <ul style="text-align:right;list-style:circle;">
      <li>Ù‚Ù… Ø¨ÙØ­Øµ Ø¬Ø°ÙˆØ¹ Ø§Ù„Ù†Ø®ÙŠÙ„ Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§.</li>
      <li>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØµØ§Ø¦Ø¯ Ø§Ù„ÙØ±Ù…ÙˆÙ†ÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…ØªÙ‚Ø§Ø±Ø¨.</li>
      <li>Ø­Ù‚Ù† Ø§Ù„Ø£Ø´Ø¬Ø§Ø± Ø§Ù„Ù…ØµØ§Ø¨Ø© Ø¨Ù…Ø¨ÙŠØ¯Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§.</li>
      <li>ØªÙ‚Ù„ÙŠÙ… Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„Ù…ØªØ¶Ø±Ø±Ø© ÙˆØ­Ø±Ù‚Ù‡Ø§ Ø¨Ø¹ÙŠØ¯Ù‹Ø§.</li>
    </ul>
    <button onclick="closeAlert()">ÙÙ‡Ù…Øª</button>
  </div>
</div>

<script>
const data=[
  {date:"2025-11-01",insects:22,temp:34,hum:60,co2:430},
  {date:"2025-11-02",insects:28,temp:35,hum:63,co2:440},
  {date:"2025-11-03",insects:32,temp:36,hum:66,co2:450},
  {date:"2025-11-04",insects:38,temp:37,hum:68,co2:460},
  {date:"2025-11-05",insects:41,temp:38,hum:70,co2:470},
];
let chart1,chart2,chart3,chart4;

function showPage(id){
  document.querySelectorAll('.home,.page').forEach(p=>{p.classList.remove('active');p.style.opacity=0;});
  setTimeout(()=>{document.getElementById(id).classList.add('active');document.getElementById(id).style.opacity=1;},200);
}

function login(){
  const u=document.getElementById('loginUser').value.trim();
  const p=document.getElementById('loginPass').value.trim();
  if(u==="admin"&&p==="12345"){showPage('dashboard');renderCharts();}
  else alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©!");
}

function logout(){showPage('home');}
function closeAlert(){document.getElementById('alertModal').style.display='none';}
function switchTab(tab){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.chart-area').forEach(x=>x.style.display='none');
  document.querySelector(`.tab:nth-child(${tab==='history'?1:tab==='analysis'?2:3})`).classList.add('active');
  document.getElementById(`tab-${tab}`).style.display='block';
}

// âœ… Ø§Ù„Ø±Ø³ÙˆÙ…Ø§Øª
function renderCharts(){
  // 1ï¸âƒ£ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ§Ø±ÙŠØ®ÙŠØ©
  const ctx1=document.getElementById('chart1');
  if(chart1)chart1.destroy();
  chart1=new Chart(ctx1,{
    type:'line',
    data:{
      labels:data.map(d=>d.date),
      datasets:[
        {label:'Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³',data:data.map(d=>d.insects),borderColor:'#c0392b',tension:.3},
        {label:'Ø§Ù„Ø­Ø±Ø§Ø±Ø©',data:data.map(d=>d.temp),borderColor:'#e67e22',tension:.3},
        {label:'Ø§Ù„Ø±Ø·ÙˆØ¨Ø©',data:data.map(d=>d.hum),borderColor:'#16a085',tension:.3}
      ]
    },
    options:{plugins:{legend:{position:'bottom'}}}
  });

  // 2ï¸âƒ£ ØªØ­Ù„ÙŠÙ„ Ø¨ÙŠØ§Ù†ÙŠ (Ø£Ø¹Ù…Ø¯Ø©)
  const ctx2=document.getElementById('chart2');
  if(chart2)chart2.destroy();
  chart2=new Chart(ctx2,{
    type:'bar',
    data:{
      labels:data.map(d=>d.date),
      datasets:[
        {label:'Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³',data:data.map(d=>d.insects),backgroundColor:'#c0392b'},
        {label:'COâ‚‚',data:data.map(d=>d.co2/10),backgroundColor:'#8e44ad'}
      ]
    },
    options:{plugins:{legend:{position:'bottom'}}}
  });

  // 3ï¸âƒ£ ØªÙˆØ²ÙŠØ¹ Ø¨ÙŠØ¦ÙŠ (Ø¯Ø§Ø¦Ø±ÙŠ)
  const ctx3=document.getElementById('chart3');
  if(chart3)chart3.destroy();
  chart3=new Chart(ctx3,{
    type:'pie',
    data:{
      labels:['Ø­Ø±Ø§Ø±Ø©','Ø±Ø·ÙˆØ¨Ø©','COâ‚‚'],
      datasets:[{data:[36,65,450/10],backgroundColor:['#e67e22','#16a085','#8e44ad']}]
    }
  });

  // 4ï¸âƒ£ ØªÙ†Ø¨Ø¤Ø§Øª
  const ctx4=document.getElementById('chart4');
  if(chart4)chart4.destroy();
  const last=data[data.length-1].insects;
  const predict=[];
  for(let i=1;i<=5;i++){predict.push(last+(Math.random()*6-2));}
  chart4=new Chart(ctx4,{
    type:'line',
    data:{
      labels:['+1 ÙŠÙˆÙ…','+2 ÙŠÙˆÙ…','+3 ÙŠÙˆÙ…','+4 ÙŠÙˆÙ…','+5 ÙŠÙˆÙ…'],
      datasets:[{label:'ØªÙˆÙ‚Ø¹Ø§Øª Ø¹Ø¯Ø¯ Ø§Ù„Ø³ÙˆØ³',data:predict,borderColor:'#2980b9',fill:false,tension:.3}]
    },
    options:{plugins:{legend:{position:'bottom'}}}
  });

  // ğŸ“‹ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„
  const table=document.getElementById('dataTable');
  table.innerHTML="";
  data.forEach(d=>{
    table.innerHTML+=`<tr><td>${d.date}</td><td>${d.insects}</td><td>${d.temp}</td><td>${d.hum}</td><td>${d.co2}</td></tr>`;
  });

  // ğŸ”¥ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø®Ø·Ø±
  const avgInsects=data.reduce((a,b)=>a+b.insects,0)/data.length;
  const avgTemp=data.reduce((a,b)=>a+b.temp,0)/data.length;
  const avgHum=data.reduce((a,b)=>a+b.hum,0)/data.length;
  if(avgInsects>30 && avgTemp>35 && avgHum>65){
    document.getElementById('alertModal').style.display='flex';
  }
}
</script>
</body>
</html>
